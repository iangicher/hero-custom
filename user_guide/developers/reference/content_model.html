<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
	<head>
		<title>Content Model | Hero User Guide</title>
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
		<script type="text/javascript" src="./../../js/shCore.js"></script>
		<script type="text/javascript" src="./../../js/shBrushPhp.js"></script>
		<script type="text/javascript" src="./../../js/shBrushXml.js"></script>
		<script type="text/javascript" src="./../../js/user_guide.js"></script>
		<link href="./../../css/user_guide.css" media="screen" rel="stylesheet" type="text/css" />
		<link href="./../../css/shCore.css" media="screen" rel="stylesheet" type="text/css" />
		<link href="./../../css/shThemeDefault.css" media="screen" rel="stylesheet" type="text/css" />
	</head>
	<body>
		<div class="header">
			Hero <span class="sub">/ User Guide</span>
		</div>
		<div class="body">
			<div id="navigation">
				<ul>
					<li>
						<a rel="basic" class="parent" href="#">Basic Details</a>
						<ul>
							<li>
								<a href="./../../index.html">Welcome to Hero</a>
							</li>
							<li>
								<a href="./../../license.html">License Agreement</a>
							</li>
							<li>
								<a href="./../../changelog.html">Changelog</a>
							</li>
						</ul>
					</li>
					<li>
						<a rel="installation" class="parent" href="#">Installation</a>
						<ul>
							<li>
								<a href="./../../installation/server_requirements.html">Server Requirements</a>
							</li>
							<li>
								<a href="./../../installation/installation.html">Fresh Installation</a>
							</li>
							<li>
								<a href="./../../installation/upgrading.html">Upgrading</a>
							</li>
							<li>
								<a href="./../../installation/migration.html">Migration</a>
							</li>
							<li>
								<a href="./../../installation/troubleshooting.html">Troubleshooting</a>
							</li>
							<li>
								<a href="./../../installation/deployment.html">Mass Deployment</a>
							</li>
						</ul>
					</li>
					<li>
						<a rel="configuration" class="parent" href="#">Configuration</a>
						<ul>
							<li>
								<a href="./../../configuration/settings.html">Settings</a>
							</li>
							<li>
								<a href="./../../configuration/coupon_codes.html">Coupon Codes</a>
							</li>
							<li>
								<a href="./../../configuration/branding.html">Custom Branding</a>
							</li>
							<li>
								<a href="./../../configuration/custom_fields.html">Custom Fields</a>
							</li>
							<li>
								<a href="./../../configuration/emails.html">Emails</a>
							</li>
							<li>
								<a href="./../../configuration/importing_members.html">Importing Members</a>
							</li>
							<li>
								<a href="./../../configuration/member_groups.html">Member Groups</a>
							</li>
							<li>
								<a href="./../../configuration/payment_gateways.html">Payment Gateways</a>
							</li>
							<li>
								<a href="./../../configuration/reports.html">Reports</a>
							</li>
							<li>
								<a href="./../../configuration/search.html">Search</a>
							</li>
							<li>
								<a href="./../../configuration/security.html">Security</a>
							</li>
							<li>
								<a href="./../../configuration/shipping.html">Shipping Rates</a>
							</li>
							<li>
								<a href="./../../configuration/subscriptions.html">Subscriptions</a>
							</li>
							<li>
								<a href="./../../configuration/taxes.html">Taxes</a>
							</li>
							<li>
								<a href="./../../configuration/advanced.html">Advanced</a>
							</li>
						</ul>
					</li>
					<li>
						<a rel="publishing" class="parent" href="#">Publishing</a>
						<ul>
							<li><a href="./../../publishing/blogs.html">Blogs</a></li>
							<li><a href="./../../publishing/content.html">Content &amp; Content Types</a></li>
							<li><a href="./../../publishing/forms.html">Forms</a></li>
							<li><a href="./../../publishing/menus.html">Navigation Menus</a></li>
							<li><a href="./../../publishing/rss_feeds.html">RSS Feeds</a></li>
							<li><a href="./../../publishing/store.html">Store Products &amp; Collections</a>
							<li><a href="./../../publishing/topics.html">Topics</a></li>
						</ul>
					</li>
					<li>
						<a rel="designers" class="parent" href="#">Designing</a>
						<ul>
							<li><a href="./../../designers/index.html">Designer Introduction</a></li>
							<li><a href="./../../designers/smarty.html">Smarty Template Engine</a></li>
							<li><a href="./../../designers/includes.html">Stylesheets &amp; JavaScript</a></li>
							<li><a href="./../../designers/template_plugins.html">Template Plugins</a></li>
							<li><a href="./../../designers/mapping_urls.html">Mapping URL's</a></li>
							<li class="reference">Reference</li>
							<li class="reference"><a href="./../../designers/reference/global_variables.html">Global Variables</a></li>
							<li class="reference"><a href="./../../designers/reference/global_plugins.html">Global Plugins</a></li>
							<li class="reference"><a href="./../../designers/reference/blogs.html">Blogs &amp; Archives</a></li>
							<li class="reference"><a href="./../../designers/reference/custom_fields.html">Custom Fields</a></li>
							<li class="reference"><a href="./../../designers/reference/forms.html">Forms</a></li>
							<li class="reference"><a href="./../../designers/reference/members.html">Members</a></li>
							<li class="reference"><a href="./../../designers/reference/menus.html">Navigation Menus</a></li>
							<li class="reference"><a href="./../../designers/reference/paywall_privileges.html">Access Restrictions &amp; Paywalls</a></li>
							<li class="reference"><a href="./../../designers/reference/publish.html">Published Content &amp; Topics</a></li>
							<li class="reference"><a href="./../../designers/reference/rss_feeds.html">RSS Feeds</a></li>
							<li class="reference"><a href="./../../designers/reference/search.html">Search Forms &amp; Results</a></li>
							<li class="reference"><a href="./../../designers/reference/store.html">Store Products &amp; Collections</a></li>
							<li class="reference"><a href="./../../designers/reference/subscriptions.html">Subscriptions</a></li>
							<li class="reference"><a href="./../../designers/reference/custom_fields.html">Custom Fields</a></li>
						</ul>
					</li>
					<li>
						<a rel="developers" class="parent active" href="#">Developing</a>
						<ul>
							<li><a href="./../../developers/index.html">Developer Introduction</a></li>
							<li><a href="./../../developers/codeigniter.html">CodeIgniter</a></li>
							<li><a href="./../../developers/standards.html">Standards &amp; Best Practices</a></li>
							<li><a href="./../../developers/security.html">Security</a></li>
							<li><a href="./../../developers/modules.html">Module Development</a></li>
							<li><a href="./../../developers/template_plugins.html">Template Plugin Development</a></li>
							<li><a href="./../../developers/cronjobs.html">Cronjobs &amp; Automated Processes</a></li>
							<li><a href="./../../developers/forms.html">Forms &amp; Custom Fieldtypes</a></li>
							<li><a href="./../../developers/errors_logging.html">Errors &amp; Logging</a></li>
							<li><a href="./../../developers/profiling.html">Debug/Profile Mode</a></li>
							<li class="reference">Reference</li>
							<li class="reference"><a href="./../../developers/reference/admin_form_library.html">Admin Form Library</a></li> 
							<li class="reference"><a href="./../../developers/reference/admin_navigation_library.html">Admin Navigation Library</a></li> 
							<li class="reference"><a href="./../../developers/reference/app_hooks_library.html">App Hooks Library</a></li>
							<li class="reference"><a href="./../../developers/reference/array_to_csv_library.html">Array to CSV Library</a></li> 
							<li class="reference"><a href="./../../developers/reference/array_to_json_helper.html">Array to JSON Helper</a></li> 
							<li class="reference"><a href="./../../developers/reference/blog_model.html">Blog Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/cart_model.html">Cart Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/clean_string_helper.html">Clean String Helper</a></li> 
							<li class="reference"><a href="./../../developers/reference/collections_model.html">Collections Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/content_model.html">Content Model</a></li>
							<li class="reference"><a href="./../../developers/reference/content_type_model.html">Content Type Model</a></li>  
							<li class="reference"><a href="./../../developers/reference/coupon_model.html">Coupon Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/custom_fields_model.html">Custom Fields Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/dataset_library.html">Dataset Library</a></li> 
							<li class="reference"><a href="./../../developers/reference/email_model.html">Email Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/fieldtype_library.html">Fieldtype Library</a></li> 
							<li class="reference"><a href="./../../developers/reference/form_builder_library.html">Form Builder Library</a></li> 
							<li class="reference"><a href="./../../developers/reference/form_model.html">Form Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/image_thumb_helper.html">Image Thumb Helper</a></li>
							<li class="reference"><a href="./../../developers/reference/invoice_model.html">Invoice Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/head_assets_library.html">Head Assets Library</a></li> 
							<li class="reference"><a href="./../../developers/reference/link_model.html">Link Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/login_model.html">Login Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/menu_model.html">Menu Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/notices_library.html">Notices Library</a></li>
							<li class="reference"><a href="./../../developers/reference/order_model.html">Order Model</a></li>  
							<li class="reference"><a href="./../../developers/reference/products_model.html">Products Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/usergroup_model.html">Usergroup Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/product_option_model.html">Product Option Model</a></li>
							<li class="reference"><a href="./../../developers/reference/rss_model.html">RSS Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/setting_helper.html">Setting Helper</a></li>
							<li class="reference"><a href="./../../developers/reference/settings_model.html">Settings Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/shipping_model.html">Shipping Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/states_model.html">States Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/stats_library.html">Stats Library</a></li> 
							<li class="reference"><a href="./../../developers/reference/subscription_model.html">Subscription Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/subscription_plan_model.html">Subscription Plan Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/taxes_model.html">Taxes Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/template_files_helper.html">Template Files Helper</a></li> 
							<li class="reference"><a href="./../../developers/reference/theme_model.html">Theme Model</a></li>
							<li class="reference"><a href="./../../developers/reference/time_since_helper.html">Time Since Helper</a></li> 
							<li class="reference"><a href="./../../developers/reference/topic_model.html">Topic Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/url_helper.html">URL Helper</a></li> 
							<li class="reference"><a href="./../../developers/reference/user_model.html">User Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/usergroup_model.html">Usergroup Model</a></li> 
						</ul>
						
					</li>
				</ul>
			</div>
			<div id="content">
				<h1>Content Model</h1>

<p>This model is the gateway to retrieving and searching all of the content published via the publish module.  This includes content of content type created and managed at <strong>Publish > Content Types</strong> in the control panel.</p>

<p>Of course, you can also publish and manage existing content.</p>

<h2>Initialization</h2>

<pre class="code brush: php">

$this-&gt;load-&gt;model('publish/content_model');
// methods now available at $this-&gt;content_model-&gt;x();

</pre>

<h2>Method Reference</h2>

<h3 class="method"><span class="return_type">int</span> <span class="method_name">new_content</span> <span class="arguments">(int <span class="variable">$type</span> , int <span class="variable">$user</span> [, string <span class="variable">$title</span> = '' [, string <span class="variable">$url_path</span> = '' [, array <span class="variable">$topics</span> = array() [, array <span class="variable">$privileges</span> = array() [, string <span class="variable">$publish_date</span> = FALSE [, array <span class="variable">$custom_fields</span> = array()]]]]]])</span></h3>

<p>Publish new content and get the returned <span class="code">$content_id</span>.  Technically, almost all the fields are optional.  However, all standard content (i.e., with a Title and URL Path and potentially with topics, member group privileges, and a publish date) will use all of the function parameters.</p>

<p>The <span class="code">$custom_fields</span> array is a simple key => value array likely generated automatically by <a href="./../../developers/reference/form_builder_library.html">the form builder library</a>.  However, if you are creating new content outside of the control panel, you can just as easily create this array yourself as long as each key is equal to the name of a custom field comprising the content type's fields.</p>

<h3 class="method"><span class="return_type">void</span> <span class="method_name">update_content</span> <span class="arguments">(int <span class="variable">$content_id</span> [, string <span class="variable">$title</span> = '' [, string <span class="variable">$url_path</span> = '' [, array <span class="variable">$topics</span> = array() [, array <span class="variable">$privileges</span> = array() [, string <span class="variable">$publish_date</span> = FALSE [, array <span class="variable">$custom_fields</span> = array()]]]]]])</span></h3>

<p>Update an existing piece of content.</p>

<h3 class="method"><span class="return_type">boolean</span> <span class="method_name">delete_content</span> <span class="arguments">(int <span class="variable">$content_id</span>)</span></h3>

<p>Delete an existing piece of content.</p>

<h3 class="method"><span class="return_type">int</span> <span class="method_name">add_hit</span> <span class="arguments">(int <span class="variable">$content_id</span>)</span></h3>

<p>Add a traffic hit to a piece of content.</p>

<h3 class="method"><span class="return_type">int</span> <span class="method_name">get_content_id</span> <span class="arguments">(string <span class="variable">$url_path</span>)</span></h3>

<p>Retrieve the content ID for a piece of content when given the URL path.  This is used in the content controller.</p>

<h3 class="method"><span class="return_type">int</span> <span class="method_name">count_content</span> <span class="arguments">( [array <span class="variable">$filters</span> = array()])</span></h3>

<p>Count all content items in the database matching the optional filters.  These filters are identical to those of <span class="code">get_contents()</span>.  In fact, this method is a wrapper for that method, but uses a much more optimize method of obtaining a simple count number.</p>

<h3 class="method"><span class="return_type">array</span> <span class="method_name">get_content</span> <span class="arguments">(int <span class="variable">$content_id</span> [, boolean <span class="variable">$allow_future</span> = FALSE])</span></h3>

<p>Retrieve an array for a single piece of content from the database.  By default, content with publish dates in the future will return <span class="code">FALSE</span>.</p>

<h3 class="method"><span class="return_type">array</span> <span class="method_name">get_contents</span> <span class="arguments">( [array <span class="variable">$filters</span> = array() , boolean <span class="variable">$counting</span> = FALSE])</span></h3>

<p>Retrieve one or more content items in an array as filtered with the optional filters.</p>

<p>Possible Filters: </p>

<ul>
<li>date <strong>start_date</strong> - Only content after this date</li>
<li>date <strong>end_date</strong> - Only content before this date</li>
<li>string <strong>author_like</strong> - Only content created by this user (by username, text search)</li>
<li>int <strong>type</strong> - Only content of this type</li>
<li>string <strong>title</strong></li>
<li>int <strong>id</strong></li>
<li>array <strong>topic</strong> - Single topic ID or array of multiple topics</li>
<li>array <strong>author</strong> - Single author ID or array of multiple authors</li>
<li>string <strong>keyword</strong> - A keyword to search across a content type (i.e., it requires <span class="code">$filters['type']</span>).  This is a full text search across all of the content fields available.  If selected, each element returns a <strong>relevance</strong> key, as well.</li>
<li>string <strong>date_format</strong> - The format to return dates in</li>
<li>boolean <strong>allow_future</strong> - Allow content from the future?  Default: FALSE.</li>
<li>string <strong>sort</strong></li>
<li>string <strong>sort_dir</strong></li>
<li>int <strong>limit</strong></li>
<li>int <strong>offset</strong></li>
</ul>

<div class="note">You may also send any of your content types' <strong>custom fields</strong> as a filter, referencing the "system_name" of the custom field.  For example, if
<p>you have a field called "Program Type", you can send a filter called <span class="code">program_type</span>.  If your custom field conflicts</p>
with another MySQL column name, you can send it using your content type's table as a prefix.  For example: <span class="code">programs.program_type</span>.
<p>To pass the filter as a search parameter, wrap it in "%" (e.g., <span class="code">%test%</span>).</div></p>

<p>Each piece of content has the following data:</p>

<ul>
<li><strong>id</strong></li>
<li><strong>link_id</strong> - Corresponding with the <a href="./../../developers/reference/link_model.html">Link model</a></li>
<li><strong>date</strong> - Publish date</li>
<li><strong>modified_date</strong> - Date last modified</li>
<li><strong>author_id</strong></li>
<li><strong>author_username</strong></li>
<li><strong>author_first_name</strong></li>
<li><strong>author_last_name</strong></li>
<li><strong>author_email</strong></li>
<li><strong>type_id</strong></li>
<li><strong>type_name</strong></li>
<li><strong>is_standard</strong> - Returns TRUE if the content is a "standard" content type with a title, URL path, privileges, etc, else FALSE.</li>
<li><strong>title</strong></li>
<li><strong>url_path</strong></li>
<li><strong>url</strong></li>
<li><strong>privileges</strong> - Array of member groups who can access this content.</li>
<li><strong>topics</strong> - Array of topics that the group belongs to.</li>
<li><strong>template</strong> - Template file used to display this content (based on the content type, not this individual piece of content).</li>
<li><strong>hits</strong> - Number of hits</li>
<li><strong>relevance</strong> - If you used the <span class="code">keyword</span> filter to do a search, each returned piece of content will have this key.</li>
<li>All custom field data is returned here as well, though this is custom to each content type.  They are returned with each custom field's "name" attribute as the key in this array.</li>
			</div>
		</div>
	</body>
</html>
<!-- /developers/reference-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
	<head>
		<title>Fieldtype Library | Hero User Guide</title>
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
		<script type="text/javascript" src="./../../js/shCore.js"></script>
		<script type="text/javascript" src="./../../js/shBrushPhp.js"></script>
		<script type="text/javascript" src="./../../js/shBrushXml.js"></script>
		<script type="text/javascript" src="./../../js/user_guide.js"></script>
		<link href="./../../css/user_guide.css" media="screen" rel="stylesheet" type="text/css" />
		<link href="./../../css/shCore.css" media="screen" rel="stylesheet" type="text/css" />
		<link href="./../../css/shThemeDefault.css" media="screen" rel="stylesheet" type="text/css" />
	</head>
	<body>
		<div class="header">
			Hero <span class="sub">/ User Guide</span>
		</div>
		<div class="body">
			<div id="navigation">
				<ul>
					<li>
						<a rel="basic" class="parent" href="#">Basic Details</a>
						<ul>
							<li>
								<a href="./../../index.html">Welcome to Hero</a>
							</li>
							<li>
								<a href="./../../license.html">License Agreement</a>
							</li>
							<li>
								<a href="./../../changelog.html">Changelog</a>
							</li>
						</ul>
					</li>
					<li>
						<a rel="installation" class="parent" href="#">Installation</a>
						<ul>
							<li>
								<a href="./../../installation/server_requirements.html">Server Requirements</a>
							</li>
							<li>
								<a href="./../../installation/installation.html">Fresh Installation</a>
							</li>
							<li>
								<a href="./../../installation/upgrading.html">Upgrading</a>
							</li>
							<li>
								<a href="./../../installation/migration.html">Migration</a>
							</li>
							<li>
								<a href="./../../installation/troubleshooting.html">Troubleshooting</a>
							</li>
							<li>
								<a href="./../../installation/deployment.html">Mass Deployment</a>
							</li>
						</ul>
					</li>
					<li>
						<a rel="configuration" class="parent" href="#">Configuration</a>
						<ul>
							<li>
								<a href="./../../configuration/settings.html">Settings</a>
							</li>
							<li>
								<a href="./../../configuration/coupon_codes.html">Coupon Codes</a>
							</li>
							<li>
								<a href="./../../configuration/branding.html">Custom Branding</a>
							</li>
							<li>
								<a href="./../../configuration/custom_fields.html">Custom Fields</a>
							</li>
							<li>
								<a href="./../../configuration/emails.html">Emails</a>
							</li>
							<li>
								<a href="./../../configuration/importing_members.html">Importing Members</a>
							</li>
							<li>
								<a href="./../../configuration/member_groups.html">Member Groups</a>
							</li>
							<li>
								<a href="./../../configuration/payment_gateways.html">Payment Gateways</a>
							</li>
							<li>
								<a href="./../../configuration/reports.html">Reports</a>
							</li>
							<li>
								<a href="./../../configuration/search.html">Search</a>
							</li>
							<li>
								<a href="./../../configuration/security.html">Security</a>
							</li>
							<li>
								<a href="./../../configuration/shipping.html">Shipping Rates</a>
							</li>
							<li>
								<a href="./../../configuration/subscriptions.html">Subscriptions</a>
							</li>
							<li>
								<a href="./../../configuration/taxes.html">Taxes</a>
							</li>
							<li>
								<a href="./../../configuration/advanced.html">Advanced</a>
							</li>
						</ul>
					</li>
					<li>
						<a rel="publishing" class="parent" href="#">Publishing</a>
						<ul>
							<li><a href="./../../publishing/blogs.html">Blogs</a></li>
							<li><a href="./../../publishing/content.html">Content &amp; Content Types</a></li>
							<li><a href="./../../publishing/forms.html">Forms</a></li>
							<li><a href="./../../publishing/menus.html">Navigation Menus</a></li>
							<li><a href="./../../publishing/rss_feeds.html">RSS Feeds</a></li>
							<li><a href="./../../publishing/store.html">Store Products &amp; Collections</a>
							<li><a href="./../../publishing/topics.html">Topics</a></li>
						</ul>
					</li>
					<li>
						<a rel="designers" class="parent" href="#">Designing</a>
						<ul>
							<li><a href="./../../designers/index.html">Designer Introduction</a></li>
							<li><a href="./../../designers/smarty.html">Smarty Template Engine</a></li>
							<li><a href="./../../designers/includes.html">Stylesheets &amp; JavaScript</a></li>
							<li><a href="./../../designers/template_plugins.html">Template Plugins</a></li>
							<li><a href="./../../designers/mapping_urls.html">Mapping URL's</a></li>
							<li class="reference">Reference</li>
							<li class="reference"><a href="./../../designers/reference/global_variables.html">Global Variables</a></li>
							<li class="reference"><a href="./../../designers/reference/global_plugins.html">Global Plugins</a></li>
							<li class="reference"><a href="./../../designers/reference/blogs.html">Blogs &amp; Archives</a></li>
							<li class="reference"><a href="./../../designers/reference/custom_fields.html">Custom Fields</a></li>
							<li class="reference"><a href="./../../designers/reference/forms.html">Forms</a></li>
							<li class="reference"><a href="./../../designers/reference/members.html">Members</a></li>
							<li class="reference"><a href="./../../designers/reference/menus.html">Navigation Menus</a></li>
							<li class="reference"><a href="./../../designers/reference/paywall_privileges.html">Access Restrictions &amp; Paywalls</a></li>
							<li class="reference"><a href="./../../designers/reference/publish.html">Published Content &amp; Topics</a></li>
							<li class="reference"><a href="./../../designers/reference/rss_feeds.html">RSS Feeds</a></li>
							<li class="reference"><a href="./../../designers/reference/search.html">Search Forms &amp; Results</a></li>
							<li class="reference"><a href="./../../designers/reference/store.html">Store Products &amp; Collections</a></li>
							<li class="reference"><a href="./../../designers/reference/subscriptions.html">Subscriptions</a></li>
							<li class="reference"><a href="./../../designers/reference/custom_fields.html">Custom Fields</a></li>
						</ul>
					</li>
					<li>
						<a rel="developers" class="parent active" href="#">Developing</a>
						<ul>
							<li><a href="./../../developers/index.html">Developer Introduction</a></li>
							<li><a href="./../../developers/codeigniter.html">CodeIgniter</a></li>
							<li><a href="./../../developers/standards.html">Standards &amp; Best Practices</a></li>
							<li><a href="./../../developers/security.html">Security</a></li>
							<li><a href="./../../developers/modules.html">Module Development</a></li>
							<li><a href="./../../developers/template_plugins.html">Template Plugin Development</a></li>
							<li><a href="./../../developers/cronjobs.html">Cronjobs &amp; Automated Processes</a></li>
							<li><a href="./../../developers/forms.html">Forms &amp; Custom Fieldtypes</a></li>
							<li><a href="./../../developers/errors_logging.html">Errors &amp; Logging</a></li>
							<li><a href="./../../developers/profiling.html">Debug/Profile Mode</a></li>
							<li class="reference">Reference</li>
							<li class="reference"><a href="./../../developers/reference/admin_form_library.html">Admin Form Library</a></li> 
							<li class="reference"><a href="./../../developers/reference/admin_navigation_library.html">Admin Navigation Library</a></li> 
							<li class="reference"><a href="./../../developers/reference/app_hooks_library.html">App Hooks Library</a></li>
							<li class="reference"><a href="./../../developers/reference/array_to_csv_library.html">Array to CSV Library</a></li> 
							<li class="reference"><a href="./../../developers/reference/array_to_json_helper.html">Array to JSON Helper</a></li> 
							<li class="reference"><a href="./../../developers/reference/blog_model.html">Blog Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/cart_model.html">Cart Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/clean_string_helper.html">Clean String Helper</a></li> 
							<li class="reference"><a href="./../../developers/reference/collections_model.html">Collections Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/content_model.html">Content Model</a></li>
							<li class="reference"><a href="./../../developers/reference/content_type_model.html">Content Type Model</a></li>  
							<li class="reference"><a href="./../../developers/reference/coupon_model.html">Coupon Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/custom_fields_model.html">Custom Fields Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/dataset_library.html">Dataset Library</a></li> 
							<li class="reference"><a href="./../../developers/reference/email_model.html">Email Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/fieldtype_library.html">Fieldtype Library</a></li> 
							<li class="reference"><a href="./../../developers/reference/form_builder_library.html">Form Builder Library</a></li> 
							<li class="reference"><a href="./../../developers/reference/form_model.html">Form Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/image_thumb_helper.html">Image Thumb Helper</a></li>
							<li class="reference"><a href="./../../developers/reference/invoice_model.html">Invoice Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/head_assets_library.html">Head Assets Library</a></li> 
							<li class="reference"><a href="./../../developers/reference/link_model.html">Link Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/login_model.html">Login Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/menu_model.html">Menu Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/notices_library.html">Notices Library</a></li>
							<li class="reference"><a href="./../../developers/reference/order_model.html">Order Model</a></li>  
							<li class="reference"><a href="./../../developers/reference/products_model.html">Products Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/usergroup_model.html">Usergroup Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/product_option_model.html">Product Option Model</a></li>
							<li class="reference"><a href="./../../developers/reference/rss_model.html">RSS Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/setting_helper.html">Setting Helper</a></li>
							<li class="reference"><a href="./../../developers/reference/settings_model.html">Settings Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/shipping_model.html">Shipping Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/states_model.html">States Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/stats_library.html">Stats Library</a></li> 
							<li class="reference"><a href="./../../developers/reference/subscription_model.html">Subscription Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/subscription_plan_model.html">Subscription Plan Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/taxes_model.html">Taxes Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/template_files_helper.html">Template Files Helper</a></li> 
							<li class="reference"><a href="./../../developers/reference/theme_model.html">Theme Model</a></li>
							<li class="reference"><a href="./../../developers/reference/time_since_helper.html">Time Since Helper</a></li> 
							<li class="reference"><a href="./../../developers/reference/topic_model.html">Topic Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/url_helper.html">URL Helper</a></li> 
							<li class="reference"><a href="./../../developers/reference/user_model.html">User Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/usergroup_model.html">Usergroup Model</a></li> 
						</ul>
						
					</li>
				</ul>
			</div>
			<div id="content">
				<h1>Fieldtype Library</h1>

<p>The Fieldtype library exists for three purposes:</p>

<ul>
<li>To provide methods that deal with all custom fieldtypes, such as retrieving them all in a list, or loading a fieldtype into memory so that we can access some property of that fieldtype.</li>
<li>To create and return an object of a specific fieldtype, so that it can be manipulated</li>
<li>To be inherited by a specific custom fieldtype, and thus give it methods common to all fieldtypes such as <span class="code">value()</span> and <span class="code">name()</span> (all fields have names and values that need to be assigned).</li>
</ul>

<p>Because this library has both "global" and "local" functions, it can be a bit confusing.  The examples in this guide should clear this up.</p>

<p>The vast majority of interaction with this library will be done secondarily through the <a href="./../../developers/reference/form_builder_library.html">Form Builder library</a>.  Direct calls to these methods are unlikely by third-party developers.</p>

<h2>Initialization</h2>

<pre class="code brush: php">

$this-&gt;load-&gt;library('custom_fields/fieldtype');

</pre>

<h2>Method Reference</h2>

<h3 class="method"><span class="return_type">object</span> <span class="method_name">create</span> <span class="arguments">(<span class="variable">$type</span>)</span></h3>

<p>Create and return an object of a specific fieldtype.  Once created, the fieldtype object can be be manipulated.</p>

<pre class="code brush: php">

$field = $this-&gt;fieldtype-&gt;create('textarea');
$field-&gt;name('Story')
	  -&gt;label('Write a Story')
	  -&gt;validators(array('max_length[1000]'));

</pre>

<h3 class="method"><span class="return_type">object</span> <span class="method_name">load</span> <span class="arguments">(int|array <span class="variable">$field_data</span>)</span></h3>

<p>Pass this method either an ID of an existing custom field (i.e., a <span class="code">$custom_field_id</span>) or an array of a single custom field's configuration as returned by <span class="code">custom_fields_model-&gt;get_custom_fields()</span>, and it will return the fieldtype object just like <span class="code">create()</span>.</p>

<pre class="code brush: php">

// get field data
$field_config = $this-&gt;custom_fields_model-&gt;get_custom_field(14);

if ($field = $this-&gt;fieldtype-&gt;load($field_config)) {
	// we can do anything with the object now, but we'll just print it
	echo $field-&gt;output_admin();
}
else {
	die('Error loading field from array');
}

</pre>

<h3 class="method"><span class="return_type">boolean</span> <span class="method_name">load_type</span> <span class="arguments">(string <span class="variable">$type</span>)</span></h3>

<p>Load a particular fieldtype into memory.  This method is called automatically if a fieldtype object is being created but the type has not been defined.  However, you may want to call it independently if you are trying to access properties of a custom fieldtype, such as it's <span class="code">$description</span>.</p>

<p>Once loaded, the fieldtype is an object of the Fieldtype library.</p>

<pre class="code brush: php">

// we want to show the names and descriptions for 5 fieldtypes

$types = array('text', 'textarea', 'file_upload', 'select', 'date');

$this-&gt;load-&gt;library('custom_fields/fieldtype');
foreach ($types as $type) {
	$this-&gt;fieldtype-&gt;load_type($type);
	
	$fieldtype_name = $this-&gt;fieldtype-&gt;$type-&gt;name;
	$fieldtype_description = $this-&gt;fieldtype-&gt;$type-&gt;description;
	
	echo 'Name: ' . $fieldtype_name . ' - ' . $fieldtype_description;
}

</pre>

<h3 class="method"><span class="return_type">boolean</span> <span class="method_name">load_all_types</span> <span class="arguments">()</span></h3>

<p>Load all possible fieldtypes from <span class="filename">/app/modules/custom_fields/libraries/fieldtypes/</span> as objects of the Fieldtype library with one call.</p>

<h3 class="method"><span class="return_type">array</span> <span class="method_name">get_fieldtype_options</span> <span class="arguments">()</span></h3>

<p>Retrieve an array of all possible fieldtypes:</p>

<pre class="code brush: php">

array(
	'text' =&gt; 'Text',
	'date' =&gt; 'Date',
	'select' =&gt; 'Select Dropdown'
);

</pre>

<h3 class="method"><span class="return_type">string</span> <span class="method_name">db_column</span> <span class="arguments">()</span></h3>

<p>Return the MySQL column type for a specific fieldtype.  Useful when adjusting a database table schema based on the addition of a new custom field.</p>

<pre class="code brush: php">

// we are adding a new file_upload field to a MySQL table
$this-&gt;fieldtype-&gt;load('file_upload');
$db_type = $this-&gt;fieldtype-&gt;file_upload-&gt;db_column();

$this-&gt;db-&gt;query('ALTER TABLE `my_table` ADD COLUMN `my_new_field` ' . $db_type);

</pre>

<h3 class="method"><span class="return_type">object</span> <span class="method_name">id</span> <span class="arguments">(string <span class="variable">$id</span>)</span></h3>

<p>Set the id of a field.  Returns the field object for method chaining.</p>

<h3 class="method"><span class="return_type">object</span> <span class="method_name">type</span> <span class="arguments">(string <span class="variable">$type</span>)</span></h3>

<p>Set the type of a field.  Returns the field object for method chaining.</p>

<h3 class="method"><span class="return_type">object</span> <span class="method_name">default_value</span> <span class="arguments">(string|array <span class="variable">$default</span>)</span></h3>

<p>Set the default value of a field.  Returns the field object for method chaining.</p>

<h3 class="method"><span class="return_type">object</span> <span class="method_name">options</span> <span class="arguments">(array <span class="variable">$options</span>)</span></h3>

<p>Set the options array of a field.  Returns the field object for method chaining.  Array format:</p>

<pre class="code brush: php">

array(
	[0] = array('value' =&gt; 'black', 'name' =&gt; 'Black'),
	[1] = array('value' =&gt; 'white', 'name' =&gt; 'White'),
	[2] = array('value' =&gt; 'blue', 'name' =&gt; 'Blue')
);

</pre>

<h3 class="method"><span class="return_type">object</span> <span class="method_name">data</span> <span class="arguments">(array <span class="variable">$data</span>)</span></h3>

<p>Set additional data of a field.  Data is used for atypical field attributes (e.g., "allowed_filetypes" for file_upload fields).  Returns the field object for method chaining.</p>

<h3 class="method"><span class="return_type">object</span> <span class="method_name">value</span> <span class="arguments">(string|array|boolean <span class="variable">$value</span>)</span></h3>

<p>Set the value of a field.  Returns the field object for method chaining.</p>

<h3 class="method"><span class="return_type">object</span> <span class="method_name">label</span> <span class="arguments">(string <span class="variable">$label</span>)</span></h3>

<p>Set the label of a field.  Returns the field object for method chaining.</p>

<h3 class="method"><span class="return_type">object</span> <span class="method_name">name</span> <span class="arguments">(string <span class="variable">$name</span>)</span></h3>

<p>Set the name of a field.  Returns the field object for method chaining.</p>

<h3 class="method"><span class="return_type">object</span> <span class="method_name">width</span> <span class="arguments">(string <span class="variable">$width</span>)</span></h3>

<p>Set the width of a field.  Returns the field object for method chaining.</p>

<h3 class="method"><span class="return_type">object</span> <span class="method_name">help</span> <span class="arguments">(string <span class="variable">$help</span>)</span></h3>

<p>Set the help text of a field.  Returns the field object for method chaining.</p>

<h3 class="method"><span class="return_type">object</span> <span class="method_name">placeholder</span> <span class="arguments">(string <span class="variable">$placeholder</span>)</span></h3>

<p>Set the placeholder text of a field.  Returns the field object for method chaining.</p>

<h3 class="method"><span class="return_type">object</span> <span class="method_name">required</span> <span class="arguments">(boolean <span class="variable">$required</span>)</span></h3>

<p>Set to TRUE to make the field required upon submission/validation.  Returns the field object for method chaining.</p>

<h3 class="method"><span class="return_type">object</span> <span class="method_name">validators</span> <span class="arguments">(array <span class="variable">$validators</span>)</span></h3>

<p>Specify an array of validators.  These are in the format of <a href="http://codeigniter.com/user_guide/libraries/form_validation.html">CodeIgniter's Form Validation library</a>.  Returns the field object for method chaining.</p>

<h3 class="method"><span class="return_type">object</span> <span class="method_name">li_attribute</span> <span class="arguments">(string <span class="variable">$name</span> , string <span class="variable">$value</span>)</span></h3>

<p>Specify a name/value attribute to be used with the returned <span class="code">&lt;li&gt;</span> element when displaying a field.  Returns the field object for method chaining.</p>

<h3 class="method"><span class="return_type">object</span> <span class="method_name">field_class</span> <span class="arguments">(string <span class="variable">$name</span>)</span></h3>

<p>Specify an additional class to be assigned to the field's HTML element when displaying a field.  Returns the field object for method chaining.</p>

<h3 class="method"><span class="return_type">string</span> <span class="method_name">compile_attributes</span> <span class="arguments">(array <span class="variable">$attributes</span>)</span></h3>

<p>A helper method for fieldtype libraries, this method will take a bunch of attributes and turn them into a nice string like so:</p>

<pre class="code brush: php">

$attr = $this-&gt;compile_attributes(array('width' =&gt; '250px', 'type' =&gt; 'text', 'placeholder' =&gt; 'empty'));

// $attr is now: width=&quot;250px&quot; type=&quot;text&quot; placeholder=&quot;empty&quot;

</pre>

			</div>
		</div>
	</body>
</html>
<!-- /developers/reference-->
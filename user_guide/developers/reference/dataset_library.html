<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
	<head>
		<title>Dataset Library | Hero User Guide</title>
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
		<script type="text/javascript" src="./../../js/shCore.js"></script>
		<script type="text/javascript" src="./../../js/shBrushPhp.js"></script>
		<script type="text/javascript" src="./../../js/shBrushXml.js"></script>
		<script type="text/javascript" src="./../../js/user_guide.js"></script>
		<link href="./../../css/user_guide.css" media="screen" rel="stylesheet" type="text/css" />
		<link href="./../../css/shCore.css" media="screen" rel="stylesheet" type="text/css" />
		<link href="./../../css/shThemeDefault.css" media="screen" rel="stylesheet" type="text/css" />
	</head>
	<body>
		<div class="header">
			Hero <span class="sub">/ User Guide</span>
		</div>
		<div class="body">
			<div id="navigation">
				<ul>
					<li>
						<a rel="basic" class="parent" href="#">Basic Details</a>
						<ul>
							<li>
								<a href="./../../index.html">Welcome to Hero</a>
							</li>
							<li>
								<a href="./../../license.html">License Agreement</a>
							</li>
							<li>
								<a href="./../../changelog.html">Changelog</a>
							</li>
						</ul>
					</li>
					<li>
						<a rel="installation" class="parent" href="#">Installation</a>
						<ul>
							<li>
								<a href="./../../installation/server_requirements.html">Server Requirements</a>
							</li>
							<li>
								<a href="./../../installation/installation.html">Fresh Installation</a>
							</li>
							<li>
								<a href="./../../installation/upgrading.html">Upgrading</a>
							</li>
							<li>
								<a href="./../../installation/migration.html">Migration</a>
							</li>
							<li>
								<a href="./../../installation/troubleshooting.html">Troubleshooting</a>
							</li>
							<li>
								<a href="./../../installation/deployment.html">Mass Deployment</a>
							</li>
						</ul>
					</li>
					<li>
						<a rel="configuration" class="parent" href="#">Configuration</a>
						<ul>
							<li>
								<a href="./../../configuration/settings.html">Settings</a>
							</li>
							<li>
								<a href="./../../configuration/coupon_codes.html">Coupon Codes</a>
							</li>
							<li>
								<a href="./../../configuration/branding.html">Custom Branding</a>
							</li>
							<li>
								<a href="./../../configuration/custom_fields.html">Custom Fields</a>
							</li>
							<li>
								<a href="./../../configuration/emails.html">Emails</a>
							</li>
							<li>
								<a href="./../../configuration/importing_members.html">Importing Members</a>
							</li>
							<li>
								<a href="./../../configuration/member_groups.html">Member Groups</a>
							</li>
							<li>
								<a href="./../../configuration/payment_gateways.html">Payment Gateways</a>
							</li>
							<li>
								<a href="./../../configuration/reports.html">Reports</a>
							</li>
							<li>
								<a href="./../../configuration/search.html">Search</a>
							</li>
							<li>
								<a href="./../../configuration/security.html">Security</a>
							</li>
							<li>
								<a href="./../../configuration/shipping.html">Shipping Rates</a>
							</li>
							<li>
								<a href="./../../configuration/subscriptions.html">Subscriptions</a>
							</li>
							<li>
								<a href="./../../configuration/taxes.html">Taxes</a>
							</li>
							<li>
								<a href="./../../configuration/advanced.html">Advanced</a>
							</li>
						</ul>
					</li>
					<li>
						<a rel="publishing" class="parent" href="#">Publishing</a>
						<ul>
							<li><a href="./../../publishing/blogs.html">Blogs</a></li>
							<li><a href="./../../publishing/content.html">Content &amp; Content Types</a></li>
							<li><a href="./../../publishing/forms.html">Forms</a></li>
							<li><a href="./../../publishing/menus.html">Navigation Menus</a></li>
							<li><a href="./../../publishing/rss_feeds.html">RSS Feeds</a></li>
							<li><a href="./../../publishing/store.html">Store Products &amp; Collections</a>
							<li><a href="./../../publishing/topics.html">Topics</a></li>
						</ul>
					</li>
					<li>
						<a rel="designers" class="parent" href="#">Designing</a>
						<ul>
							<li><a href="./../../designers/index.html">Designer Introduction</a></li>
							<li><a href="./../../designers/smarty.html">Smarty Template Engine</a></li>
							<li><a href="./../../designers/includes.html">Stylesheets &amp; JavaScript</a></li>
							<li><a href="./../../designers/template_plugins.html">Template Plugins</a></li>
							<li><a href="./../../designers/mapping_urls.html">Mapping URL's</a></li>
							<li class="reference">Reference</li>
							<li class="reference"><a href="./../../designers/reference/global_variables.html">Global Variables</a></li>
							<li class="reference"><a href="./../../designers/reference/global_plugins.html">Global Plugins</a></li>
							<li class="reference"><a href="./../../designers/reference/blogs.html">Blogs &amp; Archives</a></li>
							<li class="reference"><a href="./../../designers/reference/custom_fields.html">Custom Fields</a></li>
							<li class="reference"><a href="./../../designers/reference/forms.html">Forms</a></li>
							<li class="reference"><a href="./../../designers/reference/members.html">Members</a></li>
							<li class="reference"><a href="./../../designers/reference/menus.html">Navigation Menus</a></li>
							<li class="reference"><a href="./../../designers/reference/paywall_privileges.html">Access Restrictions &amp; Paywalls</a></li>
							<li class="reference"><a href="./../../designers/reference/publish.html">Published Content &amp; Topics</a></li>
							<li class="reference"><a href="./../../designers/reference/rss_feeds.html">RSS Feeds</a></li>
							<li class="reference"><a href="./../../designers/reference/search.html">Search Forms &amp; Results</a></li>
							<li class="reference"><a href="./../../designers/reference/store.html">Store Products &amp; Collections</a></li>
							<li class="reference"><a href="./../../designers/reference/subscriptions.html">Subscriptions</a></li>
							<li class="reference"><a href="./../../designers/reference/custom_fields.html">Custom Fields</a></li>
						</ul>
					</li>
					<li>
						<a rel="developers" class="parent active" href="#">Developing</a>
						<ul>
							<li><a href="./../../developers/index.html">Developer Introduction</a></li>
							<li><a href="./../../developers/codeigniter.html">CodeIgniter</a></li>
							<li><a href="./../../developers/standards.html">Standards &amp; Best Practices</a></li>
							<li><a href="./../../developers/security.html">Security</a></li>
							<li><a href="./../../developers/modules.html">Module Development</a></li>
							<li><a href="./../../developers/template_plugins.html">Template Plugin Development</a></li>
							<li><a href="./../../developers/cronjobs.html">Cronjobs &amp; Automated Processes</a></li>
							<li><a href="./../../developers/forms.html">Forms &amp; Custom Fieldtypes</a></li>
							<li><a href="./../../developers/errors_logging.html">Errors &amp; Logging</a></li>
							<li><a href="./../../developers/profiling.html">Debug/Profile Mode</a></li>
							<li class="reference">Reference</li>
							<li class="reference"><a href="./../../developers/reference/admin_form_library.html">Admin Form Library</a></li> 
							<li class="reference"><a href="./../../developers/reference/admin_navigation_library.html">Admin Navigation Library</a></li> 
							<li class="reference"><a href="./../../developers/reference/app_hooks_library.html">App Hooks Library</a></li>
							<li class="reference"><a href="./../../developers/reference/array_to_csv_library.html">Array to CSV Library</a></li> 
							<li class="reference"><a href="./../../developers/reference/array_to_json_helper.html">Array to JSON Helper</a></li> 
							<li class="reference"><a href="./../../developers/reference/blog_model.html">Blog Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/cart_model.html">Cart Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/clean_string_helper.html">Clean String Helper</a></li> 
							<li class="reference"><a href="./../../developers/reference/collections_model.html">Collections Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/content_model.html">Content Model</a></li>
							<li class="reference"><a href="./../../developers/reference/content_type_model.html">Content Type Model</a></li>  
							<li class="reference"><a href="./../../developers/reference/coupon_model.html">Coupon Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/custom_fields_model.html">Custom Fields Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/dataset_library.html">Dataset Library</a></li> 
							<li class="reference"><a href="./../../developers/reference/email_model.html">Email Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/fieldtype_library.html">Fieldtype Library</a></li> 
							<li class="reference"><a href="./../../developers/reference/form_builder_library.html">Form Builder Library</a></li> 
							<li class="reference"><a href="./../../developers/reference/form_model.html">Form Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/image_thumb_helper.html">Image Thumb Helper</a></li>
							<li class="reference"><a href="./../../developers/reference/invoice_model.html">Invoice Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/head_assets_library.html">Head Assets Library</a></li> 
							<li class="reference"><a href="./../../developers/reference/link_model.html">Link Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/login_model.html">Login Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/menu_model.html">Menu Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/notices_library.html">Notices Library</a></li>
							<li class="reference"><a href="./../../developers/reference/order_model.html">Order Model</a></li>  
							<li class="reference"><a href="./../../developers/reference/products_model.html">Products Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/usergroup_model.html">Usergroup Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/product_option_model.html">Product Option Model</a></li>
							<li class="reference"><a href="./../../developers/reference/rss_model.html">RSS Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/setting_helper.html">Setting Helper</a></li>
							<li class="reference"><a href="./../../developers/reference/settings_model.html">Settings Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/shipping_model.html">Shipping Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/states_model.html">States Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/stats_library.html">Stats Library</a></li> 
							<li class="reference"><a href="./../../developers/reference/subscription_model.html">Subscription Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/subscription_plan_model.html">Subscription Plan Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/taxes_model.html">Taxes Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/template_files_helper.html">Template Files Helper</a></li> 
							<li class="reference"><a href="./../../developers/reference/theme_model.html">Theme Model</a></li>
							<li class="reference"><a href="./../../developers/reference/time_since_helper.html">Time Since Helper</a></li> 
							<li class="reference"><a href="./../../developers/reference/topic_model.html">Topic Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/url_helper.html">URL Helper</a></li> 
							<li class="reference"><a href="./../../developers/reference/user_model.html">User Model</a></li> 
							<li class="reference"><a href="./../../developers/reference/usergroup_model.html">Usergroup Model</a></li> 
						</ul>
						
					</li>
				</ul>
			</div>
			<div id="content">
				<h1>Dataset Library</h1>

<p>Display a formatted table in the control panel that can be filtered by any of the columns, is automatically paginated, has multirow action buttons, and is automatically available to be exported as a CSV file.</p>

<p>Example usage in a control panel controller:</p>

<pre class="code brush: php">

$this-&gt;load-&gt;library('dataset');
		
$columns = array(
				array(
					'name' =&gt; 'ID #',
					'type' =&gt; 'id',
					'width' =&gt; '5%',
					'filter' =&gt; 'text'
					),
				array(
					'name' =&gt; 'Title',
					'width' =&gt; '55%',
					'filter' =&gt; 'title',
					'type' =&gt; 'text'
					),
				array(
					'name' =&gt; 'Content Type',
					'width' =&gt; '20%',
					'filter' =&gt; 'type',
					'type' =&gt; 'select',
					'options' =&gt; array('Type1','Type2','FakeData')
					),
				array(
					'name' =&gt; '',
					'width' =&gt; '20%'
					)
			);
				
$this-&gt;dataset-&gt;columns($columns);
$this-&gt;dataset-&gt;datasource('rss_model','get_feeds');
$this-&gt;dataset-&gt;base_url(site_url('admincp/rss'));

// initialize the dataset
$this-&gt;dataset-&gt;initialize();

// add actions
$this-&gt;dataset-&gt;action('Delete','admincp/rss/delete');

$this-&gt;load-&gt;view('rss_feeds');

</pre>

<p>Then, in the loaded view file:</p>

<pre class="code brush: php">

&lt;?=$this-&gt;dataset-&gt;table_head();?&gt;
&lt;?
if (!empty($this-&gt;dataset-&gt;data)) {
	foreach ($this-&gt;dataset-&gt;data as $row) {
	?&gt;
		&lt;tr&gt;
			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;check_&lt;?=$row['id'];?&gt;&quot; value=&quot;1&quot; class=&quot;action_items&quot; /&gt;&lt;/td&gt;
			&lt;td&gt;&lt;?=$row['id'];?&gt;&lt;/td&gt;
			&lt;td&gt;&lt;a href=&quot;&lt;?=site_url('admincp/rss/edit/' . $row['id']);?&gt;&quot;&gt;&lt;?=$row['title'];?&gt;&lt;/a&gt;&lt;/td&gt;
			&lt;td&gt;&lt;?=$row['type_name'];?&gt;&lt;/td&gt;
			&lt;td class=&quot;options&quot;&gt;&lt;a href=&quot;&lt;?=site_url('admincp/rss/edit/' . $row['id']);?&gt;&quot;&gt;edit&lt;/a&gt; &lt;a href=&quot;&lt;?=$row['url'];?&gt;&quot;&gt;view&lt;/a&gt;&lt;/td&gt;
		&lt;/tr&gt;
	&lt;?
	}
}
else {
?&gt;
&lt;tr&gt;
	&lt;td colspan=&quot;5&quot;&gt;No RSS feeds available.&lt;/td&gt;
&lt;/tr&gt;
&lt;? } ?&gt;
&lt;?=$this-&gt;dataset-&gt;table_close();?&gt;

</pre>

<h2>Initialization</h2>

<pre class="code brush: php">

$this-&gt;load-&gt;library('dataset');
// methods call:
$this-&gt;dataset-&gt;datasource('content_model','get_contents');

</pre>

<h2>Method Reference</h2>

<h3 class="method"><span class="return_type">boolean</span> <span class="method_name">datasource</span> <span class="arguments">(string <span class="variable">$data_model</span> , string <span class="variable">$data_function</span> [, array <span class="variable">$data_filters</span> = 'none'])</span></h3>

<p>Sets the data source with a model, method, and any default parameters to pass to this method.  If the model is not loaded, it will be loaded automatically (thus, it should be in "module/model" format).</p>

<p>The <span class="code">$data_filters</span> array is a way to pass certain filters to the data method (via the first parameter, an array of filters).  These will be sent regardless of the filters set in the dataset.</p>

<h3 class="method"><span class="return_type">void</span> <span class="method_name">columns</span> <span class="arguments">(array <span class="variable">$columns</span>)</span></h3>

<p>Specify, in a multi-dimensional array, a series of columns in the dataset.</p>

<p>Each column should have the following key:</p>

<ul>
<li><strong>name</strong></li>
</ul>

<p>Each column can optionally have the following keys:</p>

<ul>
<li><strong>sort_column</strong> - The "sort" parameter to send to the datasource method if asked to source by this column.</li>
<li><strong>width</strong> - The width of this column (e.g., "20%")</li>
<li><strong>type</strong> - The type of filter for this column, if filterable (either "text", "id", "date", or "select")</li>
<li><strong>filter</strong> - The name of the filter for this column, if filterable (e.g., "title").  Should correspond with the datasource method's <span class="code">$filters</span> specifications.</li>
<li><strong>options</strong> - If type is "select", you must supply an array of options in the format of value => name.</li>
<li><strong>field_start_date</strong> - If type is "date", you must supply a filter for the datasource method corresponding with the start date.</li>
<li><strong>field_end_date</strong> - If type is "date", you must supply a filter for the datasource method corresponding with the end date.</li>
</ul>

<h3 class="method"><span class="return_type">boolean</span> <span class="method_name">initialize</span> <span class="arguments">(boolean <span class="variable">$paginate_now</span> = TRUE)</span></h3>

<p>Initialize the dataset after setting the columns, datasource, and other configurations.  If you want to hold off on pagination (likely because you want to pass the total rows manually to reduce database load), you can set <span class="code">$paginate_now</span> to FALSE.</p>

<h3 class="method"><span class="return_type">void</span> <span class="method_name">initialize_pagination</span> <span class="arguments">()</span></h3>

<p>Create the pagination HTML if you postponed pagination at <span class="code">initialize()</span>.</p>

<h3 class="method"><span class="return_type">string</span> <span class="method_name">table_head</span> <span class="arguments">()</span></h3>

<p>Retrieve the generated HTML to be placed before the table rows are outputted.</p>

<pre class="code brush: php">

&lt;?=$this-&gt;dataset-&gt;table_head();?&gt;

</pre>

<h3 class="method"><span class="return_type">string</span> <span class="method_name">table_close</span> <span class="arguments">()</span></h3>

<p>Retrieve the generated HTML to be placed after the table rows are outputted.</p>

<pre class="code brush: php">

&lt;?=$this-&gt;dataset-&gt;table_close();?&gt;

</pre>

<h3 class="method"><span class="return_type">array</span> <span class="method_name">get_filter_array</span> <span class="arguments">()</span></h3>

<p>Get an array of key => value filters from the current URL.</p>

<h3 class="method"><span class="return_type">string</span> <span class="method_name">get_encoded_filters</span> <span class="arguments">()</span></h3>

<p>Encode the filter array into ASCIIHex format so that it can be used in a URL.</p>

<h3 class="method"><span class="return_type">int</span> <span class="method_name">get_limit</span> <span class="arguments">()</span></h3>

<p>Get the current per-page limit either from the URL or <span class="code">$this-&gt;rows_per_page</span>.</p>

<h3 class="method"><span class="return_type">int</span> <span class="method_name">get_offset</span> <span class="arguments">()</span></h3>

<p>Get the current page offset from the URL, or return "0" for the beginning.</p>

<h3 class="method"><span class="return_type">void</span> <span class="method_name">get_unlimited_parameters</span> <span class="arguments">()</span></h3>

<p>Get an array of all parameters for the datasource method without any limits or offsets (used to automatically retrieve the total rows in the dataset if this isn't hardset with <span class="code">total_rows()</span>).</p>

<h3 class="method"><span class="return_type">string</span> <span class="method_name">get_pagination</span> <span class="arguments">()</span></h3>

<p>Retrieve the pagination HTML.</p>

<h3 class="method"><span class="return_type">boolean</span> <span class="method_name">has_filters</span> <span class="arguments">()</span></h3>

<p>Does this dataset have active filtering?</p>

<h3 class="method"><span class="return_type">boolean</span> <span class="method_name">total_rows</span> <span class="arguments">(int <span class="variable">$total_rows</span>)</span></h3>

<p>Set <span class="code">$this-&gt;total_rows</span>.</p>

<h3 class="method"><span class="return_type">bool</span> <span class="method_name">action</span> <span class="arguments">(string <span class="variable">$name</span> , string <span class="variable">$link</span>)</span></h3>

<p>Add an action to <span class="code">$this-&gt;actions</span>.</p>

<h3 class="method"><span class="return_type">boolean</span> <span class="method_name">rows_per_page</span> <span class="arguments">(int <span class="variable">$rows_per_page</span>)</span></h3>

<p>Set the <span class="code">$this-&gt;rows_per_page</span> configuration.</p>

<h3 class="method"><span class="return_type">boolean</span> <span class="method_name">base_url</span> <span class="arguments">(string <span class="variable">$base_url</span>)</span></h3>

<p>Set the <span class="code">$this-&gt;base_url</span> configuration.</p>

			</div>
		</div>
	</body>
</html>
<!-- /developers/reference-->
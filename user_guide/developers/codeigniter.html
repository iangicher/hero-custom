<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
	<head>
		<title>CodeIgniter | Hero User Guide</title>
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
		<script type="text/javascript" src="./../js/shCore.js"></script>
		<script type="text/javascript" src="./../js/shBrushPhp.js"></script>
		<script type="text/javascript" src="./../js/shBrushXml.js"></script>
		<script type="text/javascript" src="./../js/user_guide.js"></script>
		<link href="./../css/user_guide.css" media="screen" rel="stylesheet" type="text/css" />
		<link href="./../css/shCore.css" media="screen" rel="stylesheet" type="text/css" />
		<link href="./../css/shThemeDefault.css" media="screen" rel="stylesheet" type="text/css" />
	</head>
	<body>
		<div class="header">
			Hero <span class="sub">/ User Guide</span>
		</div>
		<div class="body">
			<div id="navigation">
				<ul>
					<li>
						<a rel="basic" class="parent" href="#">Basic Details</a>
						<ul>
							<li>
								<a href="./../index.html">Welcome to Hero</a>
							</li>
							<li>
								<a href="./../license.html">License Agreement</a>
							</li>
							<li>
								<a href="./../changelog.html">Changelog</a>
							</li>
						</ul>
					</li>
					<li>
						<a rel="installation" class="parent" href="#">Installation</a>
						<ul>
							<li>
								<a href="./../installation/server_requirements.html">Server Requirements</a>
							</li>
							<li>
								<a href="./../installation/installation.html">Fresh Installation</a>
							</li>
							<li>
								<a href="./../installation/upgrading.html">Upgrading</a>
							</li>
							<li>
								<a href="./../installation/migration.html">Migration</a>
							</li>
							<li>
								<a href="./../installation/troubleshooting.html">Troubleshooting</a>
							</li>
							<li>
								<a href="./../installation/deployment.html">Mass Deployment</a>
							</li>
						</ul>
					</li>
					<li>
						<a rel="configuration" class="parent" href="#">Configuration</a>
						<ul>
							<li>
								<a href="./../configuration/settings.html">Settings</a>
							</li>
							<li>
								<a href="./../configuration/coupon_codes.html">Coupon Codes</a>
							</li>
							<li>
								<a href="./../configuration/branding.html">Custom Branding</a>
							</li>
							<li>
								<a href="./../configuration/custom_fields.html">Custom Fields</a>
							</li>
							<li>
								<a href="./../configuration/emails.html">Emails</a>
							</li>
							<li>
								<a href="./../configuration/importing_members.html">Importing Members</a>
							</li>
							<li>
								<a href="./../configuration/member_groups.html">Member Groups</a>
							</li>
							<li>
								<a href="./../configuration/payment_gateways.html">Payment Gateways</a>
							</li>
							<li>
								<a href="./../configuration/reports.html">Reports</a>
							</li>
							<li>
								<a href="./../configuration/search.html">Search</a>
							</li>
							<li>
								<a href="./../configuration/security.html">Security</a>
							</li>
							<li>
								<a href="./../configuration/shipping.html">Shipping Rates</a>
							</li>
							<li>
								<a href="./../configuration/subscriptions.html">Subscriptions</a>
							</li>
							<li>
								<a href="./../configuration/taxes.html">Taxes</a>
							</li>
							<li>
								<a href="./../configuration/advanced.html">Advanced</a>
							</li>
						</ul>
					</li>
					<li>
						<a rel="publishing" class="parent" href="#">Publishing</a>
						<ul>
							<li><a href="./../publishing/blogs.html">Blogs</a></li>
							<li><a href="./../publishing/content.html">Content &amp; Content Types</a></li>
							<li><a href="./../publishing/forms.html">Forms</a></li>
							<li><a href="./../publishing/menus.html">Navigation Menus</a></li>
							<li><a href="./../publishing/rss_feeds.html">RSS Feeds</a></li>
							<li><a href="./../publishing/store.html">Store Products &amp; Collections</a>
							<li><a href="./../publishing/topics.html">Topics</a></li>
						</ul>
					</li>
					<li>
						<a rel="designers" class="parent" href="#">Designing</a>
						<ul>
							<li><a href="./../designers/index.html">Designer Introduction</a></li>
							<li><a href="./../designers/smarty.html">Smarty Template Engine</a></li>
							<li><a href="./../designers/includes.html">Stylesheets &amp; JavaScript</a></li>
							<li><a href="./../designers/template_plugins.html">Template Plugins</a></li>
							<li><a href="./../designers/mapping_urls.html">Mapping URL's</a></li>
							<li class="reference">Reference</li>
							<li class="reference"><a href="./../designers/reference/global_variables.html">Global Variables</a></li>
							<li class="reference"><a href="./../designers/reference/global_plugins.html">Global Plugins</a></li>
							<li class="reference"><a href="./../designers/reference/blogs.html">Blogs &amp; Archives</a></li>
							<li class="reference"><a href="./../designers/reference/custom_fields.html">Custom Fields</a></li>
							<li class="reference"><a href="./../designers/reference/forms.html">Forms</a></li>
							<li class="reference"><a href="./../designers/reference/members.html">Members</a></li>
							<li class="reference"><a href="./../designers/reference/menus.html">Navigation Menus</a></li>
							<li class="reference"><a href="./../designers/reference/paywall_privileges.html">Access Restrictions &amp; Paywalls</a></li>
							<li class="reference"><a href="./../designers/reference/publish.html">Published Content &amp; Topics</a></li>
							<li class="reference"><a href="./../designers/reference/rss_feeds.html">RSS Feeds</a></li>
							<li class="reference"><a href="./../designers/reference/search.html">Search Forms &amp; Results</a></li>
							<li class="reference"><a href="./../designers/reference/store.html">Store Products &amp; Collections</a></li>
							<li class="reference"><a href="./../designers/reference/subscriptions.html">Subscriptions</a></li>
							<li class="reference"><a href="./../designers/reference/custom_fields.html">Custom Fields</a></li>
						</ul>
					</li>
					<li>
						<a rel="developers" class="parent active" href="#">Developing</a>
						<ul>
							<li><a href="./../developers/index.html">Developer Introduction</a></li>
							<li><a href="./../developers/codeigniter.html">CodeIgniter</a></li>
							<li><a href="./../developers/standards.html">Standards &amp; Best Practices</a></li>
							<li><a href="./../developers/security.html">Security</a></li>
							<li><a href="./../developers/modules.html">Module Development</a></li>
							<li><a href="./../developers/template_plugins.html">Template Plugin Development</a></li>
							<li><a href="./../developers/cronjobs.html">Cronjobs &amp; Automated Processes</a></li>
							<li><a href="./../developers/forms.html">Forms &amp; Custom Fieldtypes</a></li>
							<li><a href="./../developers/errors_logging.html">Errors &amp; Logging</a></li>
							<li><a href="./../developers/profiling.html">Debug/Profile Mode</a></li>
							<li class="reference">Reference</li>
							<li class="reference"><a href="./../developers/reference/admin_form_library.html">Admin Form Library</a></li> 
							<li class="reference"><a href="./../developers/reference/admin_navigation_library.html">Admin Navigation Library</a></li> 
							<li class="reference"><a href="./../developers/reference/app_hooks_library.html">App Hooks Library</a></li>
							<li class="reference"><a href="./../developers/reference/array_to_csv_library.html">Array to CSV Library</a></li> 
							<li class="reference"><a href="./../developers/reference/array_to_json_helper.html">Array to JSON Helper</a></li> 
							<li class="reference"><a href="./../developers/reference/blog_model.html">Blog Model</a></li> 
							<li class="reference"><a href="./../developers/reference/cart_model.html">Cart Model</a></li> 
							<li class="reference"><a href="./../developers/reference/clean_string_helper.html">Clean String Helper</a></li> 
							<li class="reference"><a href="./../developers/reference/collections_model.html">Collections Model</a></li> 
							<li class="reference"><a href="./../developers/reference/content_model.html">Content Model</a></li>
							<li class="reference"><a href="./../developers/reference/content_type_model.html">Content Type Model</a></li>  
							<li class="reference"><a href="./../developers/reference/coupon_model.html">Coupon Model</a></li> 
							<li class="reference"><a href="./../developers/reference/custom_fields_model.html">Custom Fields Model</a></li> 
							<li class="reference"><a href="./../developers/reference/dataset_library.html">Dataset Library</a></li> 
							<li class="reference"><a href="./../developers/reference/email_model.html">Email Model</a></li> 
							<li class="reference"><a href="./../developers/reference/fieldtype_library.html">Fieldtype Library</a></li> 
							<li class="reference"><a href="./../developers/reference/form_builder_library.html">Form Builder Library</a></li> 
							<li class="reference"><a href="./../developers/reference/form_model.html">Form Model</a></li> 
							<li class="reference"><a href="./../developers/reference/image_thumb_helper.html">Image Thumb Helper</a></li>
							<li class="reference"><a href="./../developers/reference/invoice_model.html">Invoice Model</a></li> 
							<li class="reference"><a href="./../developers/reference/head_assets_library.html">Head Assets Library</a></li> 
							<li class="reference"><a href="./../developers/reference/link_model.html">Link Model</a></li> 
							<li class="reference"><a href="./../developers/reference/login_model.html">Login Model</a></li> 
							<li class="reference"><a href="./../developers/reference/menu_model.html">Menu Model</a></li> 
							<li class="reference"><a href="./../developers/reference/notices_library.html">Notices Library</a></li>
							<li class="reference"><a href="./../developers/reference/order_model.html">Order Model</a></li>  
							<li class="reference"><a href="./../developers/reference/products_model.html">Products Model</a></li> 
							<li class="reference"><a href="./../developers/reference/usergroup_model.html">Usergroup Model</a></li> 
							<li class="reference"><a href="./../developers/reference/product_option_model.html">Product Option Model</a></li>
							<li class="reference"><a href="./../developers/reference/rss_model.html">RSS Model</a></li> 
							<li class="reference"><a href="./../developers/reference/setting_helper.html">Setting Helper</a></li>
							<li class="reference"><a href="./../developers/reference/settings_model.html">Settings Model</a></li> 
							<li class="reference"><a href="./../developers/reference/shipping_model.html">Shipping Model</a></li> 
							<li class="reference"><a href="./../developers/reference/states_model.html">States Model</a></li> 
							<li class="reference"><a href="./../developers/reference/stats_library.html">Stats Library</a></li> 
							<li class="reference"><a href="./../developers/reference/subscription_model.html">Subscription Model</a></li> 
							<li class="reference"><a href="./../developers/reference/subscription_plan_model.html">Subscription Plan Model</a></li> 
							<li class="reference"><a href="./../developers/reference/taxes_model.html">Taxes Model</a></li> 
							<li class="reference"><a href="./../developers/reference/template_files_helper.html">Template Files Helper</a></li> 
							<li class="reference"><a href="./../developers/reference/theme_model.html">Theme Model</a></li>
							<li class="reference"><a href="./../developers/reference/time_since_helper.html">Time Since Helper</a></li> 
							<li class="reference"><a href="./../developers/reference/topic_model.html">Topic Model</a></li> 
							<li class="reference"><a href="./../developers/reference/url_helper.html">URL Helper</a></li> 
							<li class="reference"><a href="./../developers/reference/user_model.html">User Model</a></li> 
							<li class="reference"><a href="./../developers/reference/usergroup_model.html">Usergroup Model</a></li> 
						</ul>
						
					</li>
				</ul>
			</div>
			<div id="content">
				<h1>CodeIgniter</h1>

<p>Hero is built upon a very popular PHP web framework called <a href="http://www.codeigniter.com">CodeIgniter</a>.  It is open source, free, and created by the folks over at <a href="http://www.ellislab.com">Ellis Lab</a>.  There are no restrictions in developing websites or software with it, except that you have to tell people you're using it (which we're more than happy to do!).</p>

<h2>Why build one web framework on another framework?</h2>

<p>Developing Hero on CodeIgniter has loads of benefits:</p>

<ul>
<li>It decreased our early development time significantly.</li>
<li>We adopt a syntax and application architecture that is known by thousands of developers.  They can now hop into Hero development in a snap.</li>
<li>We can focus on features and high-level application development, as opposed to "reinventing the wheel" with input libraries, Active Record libraries, and all of the core system functionality contained in CodeIgniter.</li>
</ul>

<p>There aren't any cons to speak of - CodeIgniter is open and free to distribute.  Hero + CodeIgniter make a deadly team.</p>

<h2>The CodeIgniter Superobject</h2>

<p>As with any CodeIgniter application, almost all of the access to CodeIgniter's libraries comes via the <strong>superobject</strong>, an object of CodeIgniter's main class.</p>

<p>In Hero, it's accessed just like any CodeIgniter application, but here's a review:</p>

<p>Within <strong>controllers</strong>, the superobject is accessed with <span class="code">$this</span>:</p>

<pre class="code brush: php">

class Do_something extends Front_controller {
	function __construct () {
		parent::__construct();	
	}
	
	function index () {
		// let's load the email library
		$this-&gt;load-&gt;library('email');
		// now we could send an email...
	}
}

</pre>

<p>Within <strong>models</strong>, it's also accessed with <span class="code">$this</span>.  However, to access non-core libraries and/or other models, you may have to load the superobject with <span class="code">get_instance()</span>.</p>

<pre class="code brush: php">

class My_model extends CI_Model {
	function __construct () {
		parent::CI_Model();
	}
	
	function new_thing () {
		// we can access the database library just like normal
		$this-&gt;db-&gt;insert('test_table', array('test' =&gt; 'value'));
		
		// however, when I want to access another model, I have to first retrieve the superobject by reference
		$CI =&amp; get_instance();
		$CI-&gt;load-&gt;model('publish/content_model');
		$CI-&gt;content_model-&gt;new_content('test');
	}
}

</pre>

<p>Within <strong>template plugins</strong>, the CodeIgniter superobject is available at <span class="code">$smarty-&gt;CI</span>.  Example template plugin file that retrieves something from the query string:</p>

<pre class="code brush: php">

function smarty_function_query_string ($params, $smarty) {
	// the name of the element we are retrieving is a parameter: &quot;name&quot;
	// see how we can access the CodeIgniter superobject so easily?
	return $smarty-&gt;CI-&gt;input-&gt;get($params['name']);
}

</pre>

<p>Within <strong>libraries, helper functions, or any other code</strong>, you can always retrieve the CodeIgniter superobject like so:</p>

<pre class="code brush: php">

$CI =&amp; get_instance();

</pre>

<p>This loads the superobject by reference (so any changes you make to it have a global scope across the application).</p>

<h2>Differences between programming for Hero and CodeIgniter</h2>

<p>While we built Hero on CodeIgniter, there are some differences that new Hero developers should take note of.</p>

<h3>Query strings are OK!</h3>

<strong>You can use query strings with Hero</strong>, and access these query strings with <span class="code">$this-&gt;input-&gt;get()</span> just like you would expect.  Sadly, CodeIgniter itself has never played nice with query strings - and that's a big nuisance for web developers.

<h3>Almost everything is modular</h3>

<p>Instead of having one <span class="filename">/libraries/</span> folder and one <span class="filename">/models/</span> folder storing the models and libraries for every Hero module, each module has its own libraries and models folders stored in the module's folder at <span class="filename">/app/modules</span>.  This allows you to more easily separate your modules from our modules, and keep a nice clean upgrade process.</p>

<h3>We've changed the Controller parent class</h3>

<p>In CodeIgniter, controllers are defined like so:</p>

<pre class="code brush: php">

class News extends Controller {
	function News () {
		parent::Controller();
	}
}

</pre>

<p>That's alright, but it doesn't allow us to have separate controllers for the control panel and frontend, and it's not in PHP5 structure.</p>

<p>Here's how Hero declares frontend controllers:</p>

<pre class="code brush: php">

class News extends Front_Controller {
	function __construct () {
		parent::__construct();
	}
}

</pre>

<p>Furthermore, if you want to protect this controller as part of the administrator's control panel, you would extend <span class="code">Admincp_controller</span> as opposed to the <span class="code">Front_controller</span>.</p>

<h3>We've extended the shopping cart library</h3>

<p>CodeIgniter's <a href="http://codeigniter.com/user_guide/libraries/cart.html">Cart library</a> is OK, but lacks some of the truly integrated functionality we needed.  So, we've built two new additions: the MY_Cart library, and (the most important addition) the <a href="./../developers/reference/cart_model.html">Cart model</a>.</p>

<h3>The Upload library now accepts upload arrays</h3>

<p>You can now upload a series of file elements in a form at once.  Example:</p>

<pre class="code brush: php">

&lt;input type=&quot;file&quot; name=&quot;upload[]&quot; /&gt;
&lt;input type=&quot;file&quot; name=&quot;upload[]&quot; /&gt;
&lt;input type=&quot;file&quot; name=&quot;upload[]&quot; /&gt;

</pre>

<p>All three of those file elements share one name ("upload").  Previously, you couldn't use the Upload library to upload these.  Now, you can:</p>

<p>Example code for upload processing:</p>

<pre class="code brush: php">

for ($i = 0; $i &lt;= 10; $i++) {
	if (!empty($_FILES['upload']['tmp_name'][$i]) and is_uploaded_file($_FILES['upload']['tmp_name'][$i])) {
		// this is an uploaded file
		if (!$this-&gt;upload-&gt;do_upload('upload',$i)) {
			die(show_error($this-&gt;upload-&gt;display_errors()));
		}
		
		// it has been uploaded, continue cycling...
	}
}

</pre>

<h3>The Email library has been modified for mass mail</h3>

<p>CodeIgniter's <a href="http://codeigniter.com/user_guide/libraries/email.html">Email library</a> is awesome.  However, if you use it to email hundreds or thousands of people, all of the mail is sent at once and this creates system performance issues and may trip spam filters to block your mail.</p>

<p>So, in Hero, the email library has been extended so that if you pass <span class="code">send()</span> a first argument of <span class="code">TRUE</span>, the mail will be queued.  The mail queue is processed every 5 minutes, and sends out X emails (default: 400, but this is configurable) so as to not eat up system resources or trip up spam filters.</p>

<p>Example with queued mail:</p>

<pre class="code brush: php">

$this-&gt;load-&gt;library('email');
$this-&gt;email-&gt;to('test@example.com');
$this-&gt;email-&gt;from('admin@example.com');
$this-&gt;email-&gt;subject('This is a test queued email.');
$this-&gt;email-&gt;message('Hello!');

$this-&gt;email-&gt;send(TRUE);

</pre>

<p>If you do not want the mail to be queued, just use the email library as is.  You will never notice the difference.</p>

<h2>Everything else is CodeIgniter standard!</h2>

<p>Other than these noted differences, everything else in Hero functions exactly as you would expect if you are familiar with CodeIgniter.</p>

<p>So, if you need more information on anything not documented in this developers' guide, or with any core system functionality, <a href="http://www.codeigniter.com/user_guide">check out the official CodeIgniter documentation</a>.</p>
			</div>
		</div>
	</body>
</html>
<!-- /developers-->